<!DOCTYPE html>
<html>
<head>
<title>Flappy Pixel Dost - Full Screen</title>

<style>
* { box-sizing: border-box; }

body {
    margin: 0;
    width: 100vw;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: radial-gradient(circle, #0f0f1f, #000);
    overflow: hidden;
    font-family: monospace;
}

#game {
    position: relative;
    width: 100vw;
    max-width: 420px;
    height: 100vh;
    max-height: 750px;
    background: linear-gradient(#63c5ff, #2b7cff);
    border: 6px solid cyan;
    box-shadow: 0 0 40px cyan;
    overflow: hidden;
}

/* PIXEL BIRD */
#bird {
    position: absolute;
    width: 20px;
    height: 20px;
    background: yellow;
    left: 70px;
    top: 200px;
    box-shadow: inset 0 0 0 3px orange;
    image-rendering: pixelated;
}

/* PIPES */
.pipe {
    position: absolute;
    width: 52px;
    background: #1aff1a;
    box-shadow: inset 0 0 0 4px #006400;
}

.pipe-top { top: 0; }
.pipe-bottom { bottom: 0; }

/* GROUND */
#ground {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 45px;
    background: repeating-linear-gradient(
        90deg,
        #c2b280 0px,
        #c2b280 20px,
        #a7986e 20px,
        #a7986e 40px
    );
}

/* SCORE */
#score {
    position: absolute;
    top: 10px;
    width: 100%;
    text-align: center;
    font-size: 42px;
    color: white;
    text-shadow: 3px 3px black;
    z-index: 5;
}

/* START + GAMEOVER */
#start, #gameover {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,.8);
    color: white;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 10;
}

button {
    padding: 14px 26px;
    font-size: 22px;
    background: cyan;
    border: none;
    cursor: pointer;
    margin-top: 20px;
    font-weight: bold;
    box-shadow: 0 0 15px cyan;
}
</style>
</head>
<body>

<div id="game">
    <div id="score">0</div>
    <div id="bird"></div>
    <div id="ground"></div>

    <div id="start">
        <h1>FLAPPY PIXEL</h1>
        <p>Click ya Space Dabao</p>
        <button onclick="goFullScreen(); startGame();">START</button>
    </div>

    <div id="gameover" style="display:none;">
        <h1>GAME OVER</h1>
        <p>Score: <span id="finalScore">0</span></p>
        <button onclick="location.reload()">RESTART</button>
    </div>
</div>

<script>
const game = document.getElementById("game");
const bird = document.getElementById("bird");
const scoreText = document.getElementById("score");
const start = document.getElementById("start");
const over = document.getElementById("gameover");
const finalScore = document.getElementById("finalScore");

let birdY = 200;
let velocity = 0;
let gravity = 0.45;
let jump = -9;
let score = 0;
let loop, pipeLoop;
let isOver = true;

const birdX = 70;
const birdW = 20;
const birdH = 20;
const groundH = 45;
const gameH = game.clientHeight;

function startGame() {
    isOver = false;
    start.style.display = "none";
    over.style.display = "none";
    document.querySelectorAll(".pipe").forEach(p => p.remove());

    score = 0;
    velocity = 0;
    birdY = 200;
    scoreText.textContent = 0;

    loop = setInterval(update, 20);
    pipeLoop = setInterval(makePipe, 1500);

    window.addEventListener("keydown", flap);
    game.addEventListener("click", flap);
}

function flap(e) {
    if (isOver) return;
    if (e.type === "click" || e.code === "Space") {
        velocity = jump;
    }
}

function update() {
    velocity += gravity;
    birdY += velocity;
    bird.style.top = birdY + "px";
    bird.style.transform = `rotate(${velocity * 5}deg)`;

    if (birdY + birdH >= gameH - groundH) endGame();
    if (birdY < 0) birdY = 0;

    document.querySelectorAll(".pipe").forEach(pipe => {
        let x = pipe.offsetLeft - 3;
        pipe.style.left = x + "px";

        if (x + 52 < 0) pipe.remove();

        // âœ… EXACT TOUCH COLLISION
        let birdBox = { x: birdX, y: birdY, w: birdW, h: birdH };
        let pipeBox = {
            x: x,
            y: pipe.classList.contains("pipe-top") ? 0 : gameH - pipe.offsetHeight - groundH,
            w: 52,
            h: pipe.offsetHeight
        };

        let hit =
            birdBox.x < pipeBox.x + pipeBox.w &&
            birdBox.x + birdBox.w > pipeBox.x &&
            birdBox.y < pipeBox.y + pipeBox.h &&
            birdBox.y + birdBox.h > pipeBox.y;

        if (hit) endGame();

        if (pipe.classList.contains("pipe-top") && x + 52 < birdX && !pipe.scored) {
            pipe.scored = true;
            score++;
            scoreText.textContent = score;
        }
    });
}

function makePipe() {
    const gap = 140;
    const topHeight = Math.random() * 220 + 40;
    const bottomHeight = gameH - topHeight - gap - groundH;

    const top = document.createElement("div");
    top.className = "pipe pipe-top";
    top.style.height = topHeight + "px";
    top.style.left = game.clientWidth + "px";

    const bottom = document.createElement("div");
    bottom.className = "pipe pipe-bottom";
    bottom.style.height = bottomHeight + "px";
    bottom.style.left = game.clientWidth + "px";

    game.appendChild(top);
    game.appendChild(bottom);
}
function goFullScreen() {
    const el = document.documentElement;
    if (el.requestFullscreen) el.requestFullscreen();
    else if (el.webkitRequestFullscreen) el.webkitRequestFullscreen();
    else if (el.msRequestFullscreen) el.msRequestFullscreen();
}


function endGame() {
    if (isOver) return;
    isOver = true;
    clearInterval(loop);
    clearInterval(pipeLoop);
    finalScore.textContent = score;
    over.style.display = "flex";
}
</script>

</body>
</html>
